# Документация к проекту FirstRogueLike
### Цейтин Андрей Владимирович БПИ217
## Подробное описание алгоритмов генерации комнат и их содержимого:
### Есть два типа комнат в игре:
#### Нулевая или базовая комната. Комната, в которой спауниться игрок, по сути являеться изначальной комнатой из темплэйта для игры от третьего лица. На ней игрок может познакомиться с основными элементами игры, такими как: бусты, ловушки и двери. На локации представленны почти все варианты данных объектов. Вот список всех возможных объектов:
* Ловуки - статические (шипы, которые раз в какое-то время активируються и отключаються) и движующиеся по заданной траектории (по сути это пули, которыми стреляют турели, направляющие огонь в сторону игрока, после разрушения которых с некоторым шансом могут выпасть бусты или дебаффы)
* Бусты и дэбаффы (по сути это все требуемые бусты и дебаффы по ТЗ, а также буст, восстанавливающий ХП (его можно найти в более сложных комнатах в "Незапрещенной зоне"))
* Двери в трех вариантах: зеленая - вход в комнату с текущей сложностью, красная - вход в комнату с повышенной сложностью и синия - финальная дверь, вход в которую означает конец игры, как победитель (на начальной команте доступна только зеленая, после входа в которую и начинаеться основная игра)
* Сам игрок, который, помимо обчного перемещения и прыжков, может стрелять снарядами, наносящими урон турелям (чтобы пройти в следующую комнату необходимо уничтожить все туррели в текущей (об этом вам скажет сама дверь, через которую вы захотите пройти))
#### Процедурно сгенерированные комнаты:
После прохода через зеленые или красные двери, игрока телепортирует за дверь, а под ним генерируеться комната по заданным парметрам (которые зависят от сложности комнаты): 
* Количество платформ в комнате (отдельно по оси X и по оси Y)
* Количество турелей и шипов в комнате, а также укрытий (столбы, дающие игроку возможность спрятаться от пуль)
* Дополнительные настройки, на подобии времени на перезарядку, скорости пуль игрока и турелей, шанс выпадения буста при разрушении турели...

Многие параметры имеют говорящие название в таблице данных, так что нет необходимсоти сильно разъяснять это здесь. Также в комнате появляються двери, зеленая и красная (если это не финальная комната, тогда появиться синяя). Комната представляет из себя корневой элемент, inctanced mesh стены и платформ, на сонове которых позже строиться коробка и генерируеться по следующему принципу:
1) Создаються платформы, выделяеться список платформ "Незапрещенной зоны", в которой можно будет размещать все турели, шипы, бусты и укрытия. Чтобы выделить данную зону, сначала строяться платформы и все индексы instance которых не принадлежат левой нижней четверти комнаты, запоминаються и используються в дальнейшей генерации (этот список и называеться "Незапрещенная зона"). Данная зона была выделена, чтобы игрок при спауне не появился в оокружении опасности (игрок телепортируеться в комнату именно в нижней левой четверти).
2) Создаються стены.
3) Создаються двери.
4) Дальше генерируються оставшиеся объекты, по порядку: турели, шипы, укрытия, буст с востановлением здоровья (если комната сложней предыдущей). Все эти объекты спауниться путем случайного взятия индекса платформы из "Незапрещенной зоны" и последующем затеранием этого индекса, чтобы не заспаунить два объекта на одной платформе. Все объекты генерируються в центре выбранной платформы. Пока не будут уничтожены все турели, двери не пустят игрока дальше. С определенным шансом, из уничтоженной турели, будет выпадать лубой буст, кроме востанавливабщего здоровья.
5) Когда вся комната будет зачищенна от турелей, то уничтожаться все укрытия (чтобы не произошло ситуации, что укрытие перекрывает дверь в следующую комнату).
## Описание принципа изменения уровня сложности в игре:
Все данные храняться в таблице данных, которая берет их из .csv таблицы LevelDataTable, которая находиться в папке ImportedData. Чтобы работать с данной таблицей, создан отдельный объект, отвечающий за сохранение, записывание, мониторинг и обновление данных в игре, DataDistibutor, именно он обновляет данные при смене уровня сложности комнаты. Строки стаблицы - это уровни сложности, которым соответсвуют настроенные параметры. Те, что уже находятся в таблице выверены эксперементально, по необходимости можно добавлять и изменять данные в LevelDataTable, а затем реимпортировать данные в таблицу данных (изменение MinMaxRooms и MaxMaxRooms не в нулевой строке никак не повлияет на игровой процесс, поскольку DataDistibutor расчитывает максимальное количество комнат только по первой строчке).
## Описание всех значимых реализованных сверх условия дополнений:
### Игра может завершиться в двух случаях:
1) Плохая концовка - у игрока закончатся жизни (красный счетчик сверху справа опуститься до нуля)
2) Хорошая концовка - вы пройдете сквозь финальную дверь, синию

В обоих случаях игра просто завершиться, без функционала перезапуска игры сначала, придеться заново все запускать.
## Ссылки на готовые проекты, из которых были взяты части кода с пояснениями (что именно взял, почему, что изменил):
При работе не было взято какого-либо кода напрямую из других проектов, однако сильное влияние на код повлияло два видео:
* [первое видео](https://youtu.be/kjrfYuhH2JA?si=HqtBGDFR2f_51tBL) - взята часть про отображение ХП у игрока, поскольку данная вещь работает через HUD, а я с ним не очень знаком, идея с созданием компонента для объектов, у которых есть ХП (использовано для персонажа игрока и терелей) просто понравилась и была адаптирована под свои нужды.
* [второе видео(ссылка только на первое видео из плейлиста)](https://www.youtube.com/watch?v=XgIDH42RHWQ&list=PLUVfF7mQpWjUUIlvMxvV206DpEdUpXtSZ&index=1) - данным видео я именно вдохновлялся, идея про платформы мне пришла еще до его просмотра, однако я не понимал, как мне их процедурно генерировать, поэтому в основном я взял лишь идею создания комнаты на основе Instanced Mesh, а генерацию комнаты и вся остальная логика, были написаны лично мной (поэтому и код с видео не сильно похож на мой).
